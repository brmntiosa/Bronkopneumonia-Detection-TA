<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Detection Bronkopneumonia</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link rel="manifest" href="site.webmanifest"> -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/magnific-popup.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/themify-icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nice-select.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flaticon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/gijgo.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/slicknav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->

    <style>
        body {
          background: #f5f7fa;
          min-height: 100vh;
          display: flex;
          flex-direction: column;
        }
        .container {
          flex: 1;
        }
        footer {
          background: #1f2937;
          color: white;
          padding: 10px 0;
          text-align: center;
          margin-top: auto;
        }
        .prediction-result {
          font-size: 1.3rem;
          font-weight: bold;
          color: #0d6efd;
        }
        .img-preview {
          max-width: 100%;
          height: auto;
          border-radius: 8px;
          margin-top: 15px;
        }
        #loading-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(255, 255, 255, 0.85);
          display: none;
          align-items: center;
          justify-content: center;
          z-index: 9999;
          flex-direction: column;
        }
        .spinner-border {
          width: 4rem;
          height: 4rem;
        }
      </style>
</head>

<body>
    <header>
        <div class="header-area ">
            <div class="header-top_area">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-6 col-md-6 ">
                            <div class="social_media_links">
                                <a href="#">
                                    <i class="fa fa-linkedin"></i>
                                </a>
                                <a href="#">
                                    <i class="fa fa-facebook"></i>
                                </a>
                                <a href="#">
                                    <i class="fa fa-google-plus"></i>
                                </a>
                            </div>
                        </div>
                        <div class="col-xl-6 col-md-6">
                            <div class="short_contact_list">
                                <ul>
                                    <li><a href="#"> <i class="fa fa-envelope"></i> bramantio.syahrul@mhs.itenas.ac.id</a></li>
                                    <li><a href="#"> <i class="fa fa-phone"></i> +62 878 7288 7925</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="sticky-header" class="main-header-area">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-xl-3 col-lg-2">
                            <div class="logo">
                              <a class="navbar-brand text-dark fw-bold fs-4" href="/" style="text-decoration: none;">
                                ü©∫ Detection Bronkopneumonia
                              </a>
                            </div>
                          </div>
                        <div class="col-xl-6 col-lg-7">
                            <div class="main-menu  d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">
                                        <li><a class="active" href="/">home</a></li>
                                        
                                        <li><a href="single-blog.html">blog</i></a>
                                           
                                        </li>
                                        <li><a href="about.html">about</a></li>
                                    
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-3 d-none d-lg-block">
                            <div class="Appointment">
                                <div class="book_btn d-none d-lg-block">
                                    <a class="popup-with-form" href="health.html">cek kesehatan anda </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header-end -->

    <!-- Spinner Overlay -->
    <div id="loading-overlay">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-3 fw-bold text-dark">Mendeteksi Pneumonia...<br>Mohon tunggu sebentar</p>
      </div>

  <!-- Navbar -->
  
  <!-- Main Content -->
  <div class="container py-5">
    <h2 class="text-center mb-4">Deteksi Bronkopneumonia dari Citra X-Ray Paru-paru</h2>
  
    <!-- Baris 1: Kolom Kiri dan Kanan -->
    <div class="row">
      <!-- Kiri: Upload & Kamera -->
      <div class="col-lg-6">
        <div class="mb-4 text-center">
          <button class="btn btn-outline-primary me-2" onclick="toggleInput('upload')">üì§ Upload Gambar</button>
          <button class="btn btn-outline-secondary" onclick="toggleInput('camera')">üì∑ Gunakan Kamera</button>
        </div>
  
        <!-- Upload Form -->
        <form id="upload-form" method="POST" enctype="multipart/form-data">
          <div class="input-group mb-3">
            <input type="file" name="image" class="form-control" required>
          </div>
          <button type="submit" class="btn btn-primary w-100">Deteksi Sekarang</button>
        </form>
  
        <!-- Kamera Section -->
        <div id="camera-section" style="display: none;">
          <label class="form-label fw-semibold">Ambil Gambar dari Kamera</label>
          <video id="video" width="100%" autoplay playsinline class="rounded border"></video>
          <button type="button" class="btn btn-dark w-100 mt-2" id="snap">üì∏ Ambil Gambar</button>
          <canvas id="canvas" style="display: none;"></canvas>
        </div>
  
        {% if prediction %}
        <div class="mt-4 text-center">
          <p class="fw-semibold">Citra yang Anda unggah:</p>
          <img src="{{ image_path }}" alt="Preview" class="img-fluid rounded border" style="max-height: 250px;">
        </div>
        {% endif %}
      </div>
  
      <!-- Kanan: Hasil Deteksi -->
      <div class="col-lg-6">
        {% if prediction %}
        <div class="card shadow">
          <div class="card-body text-center">
            <h5 class="card-title">üîé Hasil Deteksi:</h5>
            <p class="fs-1 fw-bold 
              {% if prediction == 'Normal' %}
                text-success
              {% else %}
                text-danger
              {% endif %}
            ">
              {{ prediction }}
            </p>
            <div class="alert alert-info mt-3" role="alert">
              Hasil ini merupakan prediksi otomatis oleh sistem. Untuk diagnosis resmi, konsultasikan ke dokter.
            </div>
          </div>
        </div>
        {% else %}
        <div class="text-center mt-4">
          <h5 class="fw-bold">üîç Informasi:</h5>
          <p class="text-muted">Silakan unggah citra X-Ray dada untuk melakukan deteksi bronkopneumonia.</p>
        </div>
        {% endif %}
      </div>
    </div>
  
    <!-- Baris 2: Panduan Penggunaan (Box 3) -->
    <div class="row mt-5">
      <div class="col-12">
        <div class="card shadow-sm bg-light p-4">
          <h5 class="fw-bold text-primary mb-3">üìñ Panduan Penggunaan Aplikasi</h5>
          <ul class="mb-0">
            <li><strong>1. Unggah Gambar:</strong> Gunakan file X-Ray berformat JPG atau PNG yang jelas dan tidak blur.</li>
            <li><strong>2. Gunakan Kamera:</strong> Izinkan akses kamera, ambil gambar X-Ray yang cerah dan jelas.</li>
            <li><strong>3. Area Fokus:</strong> Pastikan bagian paru-paru terlihat penuh, tanpa terpotong.</li>
            <li><strong>4. Tunggu Hasil:</strong> Setelah mengunggah atau mengambil gambar, hasil akan ditampilkan secara otomatis.</li>
            <li><strong>5. Penting:</strong> Ini hanyalah alat bantu prediksi awal. Konsultasikan ke dokter untuk pemeriksaan lebih lanjut.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  

  <!-- Script -->
  <script>
    // Overlay saat proses
    document.getElementById("upload-form").addEventListener("submit", function (e) {
      e.preventDefault();
      const overlay = document.getElementById("loading-overlay");
      overlay.style.display = "flex";
      setTimeout(() => {
        e.target.submit();
      }, 3000);
    });
  
    // Toggle Upload / Kamera
    let videoStream = null;
    function toggleInput(method) {
      const upload = document.getElementById('upload-form');
      const camera = document.getElementById('camera-section');
      if (method === 'camera') {
        upload.style.display = 'none';
        camera.style.display = 'block';
        if (!videoStream) {
          navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
              const video = document.getElementById('video');
              video.srcObject = stream;
              video.play();
              videoStream = stream;
            })
            .catch(function (err) {
              alert("Gagal mengakses kamera: " + err.message);
            });
        }
      } else {
        upload.style.display = 'block';
        camera.style.display = 'none';
        if (videoStream) {
          videoStream.getTracks().forEach(track => track.stop());
          videoStream = null;
        }
      }
    }
  
    // Snap kamera
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const snap = document.getElementById('snap');
    snap?.addEventListener("click", function () {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      canvas.toBlob(function (blob) {
        const file = new File([blob], "capture.jpg", { type: "image/jpeg" });
        const dt = new DataTransfer();
        dt.items.add(file);
        document.querySelector('input[name="image"]').files = dt.files;
        document.getElementById('upload-form').submit();
      }, 'image/jpeg');
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
     

<!-- footer start -->
    <footer class="footer">
            <div class="footer_top">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-4 col-md-6 col-lg-4">
                            <div class="footer_widget">
                                <div class="footer_logo">
                                    <a href="/" style="color: white; font-weight: bold; font-size: 20px; text-decoration: none;">
                                        ü©∫ Detection Bronkopneumonia
                                    </a>
                                </div>
                                <p>
                                    Aplikasi ini dirancang untuk membantu mendeteksi kemungkinan bronkopneumonia dari citra X-ray secara cepat dan akurat.
                                </p>
                                <div class="socail_links">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                <i class="ti-facebook"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="ti-twitter-alt"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="fa fa-instagram"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
    
                            </div>
                        </div>
                        <div class="col-xl-2 offset-xl-1 col-md-6 col-lg-3">
                           
                        </div>
                        <div class="col-xl-2 col-md-6 col-lg-2">
                            <div class="footer_widget">
                                <h3 class="footer_title">
                                        Useful Links
                                </h3>
                                <ul>
                                    <li><a href="#">About</a></li>
                                    <li><a href="#">Blog</a></li>
                                    <li><a href="#">About</a></li>
                                    <li><a href="#"> Contact</a></li>
                                   
                                </ul>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 col-lg-3">
                            <div class="footer_widget">
                                <h3 class="footer_title">
                                        Address
                                </h3>
                                <p>
                                    Jl. Khp Hasan Mustopa No.23, Neglasari, Kec. Cibeunying Kaler, Kota Bandung, Jawa Barat 40124 <br>
                                    +62 878 7288 7925 <br>
                                    bramantio.syahrul@mhs.itenas.ac.id
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copy-right_text">
                <div class="container">
                    <div class="footer_border"></div>
                    <div class="row">
                        <div class="col-xl-12">
                            <p class="copy_right text-center">
                                <p style="color: white; margin-top: 20px;">
                                    &copy; <script>document.write(new Date().getFullYear());</script> Aplikasi Deteksi Bronkopneumonia |</strong> 
                                  </p>
                        </div>
                    </div>
                </div>
            </div>
    </footer>

 <script>
    let videoStream = null;
  
    function toggleInput(method) {
      const upload = document.getElementById('upload-form');
      const camera = document.getElementById('camera-section');
  
      if (method === 'camera') {
        upload.style.display = 'none';
        camera.style.display = 'block';
  
        if (!videoStream) {
          navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
              const video = document.getElementById('video');
              video.srcObject = stream;
              video.play();
              videoStream = stream;
            })
            .catch(function (err) {
              alert("Gagal mengakses kamera: " + err.message);
            });
        }
      } else {
        upload.style.display = 'block';
        camera.style.display = 'none';
  
        if (videoStream) {
          videoStream.getTracks().forEach(track => track.stop());
          videoStream = null;
        }
      }
    }
  
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const snap = document.getElementById('snap');
  
    snap?.addEventListener("click", function () {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
  
      canvas.toBlob(function (blob) {
        const file = new File([blob], "capture.jpg", { type: "image/jpeg" });
        const dt = new DataTransfer();
        dt.items.add(file);
        document.querySelector('input[name="image"]').files = dt.files;
  
        document.getElementById('upload-form').submit();
      }, 'image/jpeg');
    });
 </script>
  
  

  



    <script src="{{ url_for('static', filename='js/vendor/modernizr-3.5.0.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/vendor/jquery-1.12.4.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/isotope.pkgd.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/ajax-form.js') }}"></script>
<script src="{{ url_for('static', filename='js/waypoints.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.counterup.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/imagesloaded.pkgd.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/scrollIt.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.scrollUp.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/wow.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/nice-select.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.slicknav.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.magnific-popup.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/plugins.js') }}"></script>
<script src="{{ url_for('static', filename='js/gijgo.min.js') }}"></script>
<!-- contact js -->
<script src="{{ url_for('static', filename='js/contact.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.ajaxchimp.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.form.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.validate.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/mail-script.js') }}"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>